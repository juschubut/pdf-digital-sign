(function(n){n.juschubutSign=function(t){function o(t){n.ajax({type:"POST",async:!0,url:t.url,crossDomain:!0,traditional:!0,data:JSON.stringify(t.data),contentType:"application/json; charset=utf-8",success:function(n){if(t.onSuccess!=null)t.onSuccess(n)},error:function(n,t){if(typeof i.onError=="function")i.onError(t);else alert(t)}})}function s(){o({url:i.urlServer+"/Sign/Status/"+e,onSuccess:function(n){var r=n.ultimoStatus,t,u;if(typeof i.onProgress=="function")i.onProgress(n);if(r.codigo.toUpperCase()=="COMPLETADO"){if(typeof i.onComplete=="function"){t="";n.archivos!=null&&n.archivos.length>0&&(u=n.archivos[n.archivos.length-1],t=u.urlArchivoFirmado);i.onComplete({result:n,url:t})}}else if(r.codigo.toUpperCase()=="ERROR"){if(typeof i.onError=="function")i.onError(n)}else window.setTimeout(function(){s()},1e3)},onError:function(n){if(typeof i.onError=="function")i.onError(n)}})}var h={urlFirmador:"https://apprw/juschubutpdfsign/Juschubut.WinPdfDigitalSign.application",urlServer:"https://apprw/PdfSignServer",urlArchivo:"",archivos:[],layout:1,numeroFirmante:1,altoFirma:150,anchoFirma:150,posicionXFirma:0,posicionYFirma:0,modo:"oculto",leyenda:"Firmado digitalmente el {fecha-hora} por",cargo:"",onError:function(){return},onStart:function(){},onProgress:function(){},onComplete:function(){}},i=n.extend(!0,h,t),e="",u={},f,r;if(i.archivos!=null&&i.archivos.length>0){for(u.Archivos=[],f=0;f<i.archivos.length;f++)r=i.archivos[f],r!=null&&u.Archivos.push({Nombre:r.nombre,Url:r.url,ClientID:r.id});u.Archivos.length>0&&(i.urlArchivo=null)}o({url:i.urlServer+"/Sign/Setup",data:u,onSuccess:function(n){if(e=n.signID,typeof i.onStart=="function")i.onStart(e);s();var t=i.urlFirmador,r="";i.urlArchivo!=null&&i.urlArchivo!=""&&(r=encodeURI(i.urlArchivo));t+="?signID="+n.signID+"&modo="+i.modo+"&prefirma="+i.leyenda+"&postfirma="+i.cargo+"&layout="+i.layout+"&altofirma="+i.altoFirma+"&anchofirma="+i.anchoFirma+"&pxfirma="+i.posicionXFirma+"&pyfirma="+i.posicionYFirma+"&firmante="+i.numeroFirmante+"&urlServer="+encodeURI(i.urlServer)+"&archivo="+r+"&debug=true";window.location=t},onError:function(n){if(typeof i.onError=="function")i.onError(n)}})}})(jQuery);
/*
//# sourceMappingURL=jquery.juschubutSign-1.0.min.js.map
*/